(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function s(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(t){if(t.ep)return;t.ep=!0;const n=s(t);fetch(t.href,n)}})();let f=[];async function L(){try{f=await(await fetch("./paintings.json")).json(),g()}catch(e){console.error("Error loading paintings:",e)}}const m=document.getElementById("gallery"),p=document.querySelectorAll("nav a"),c=document.getElementById("lightbox"),a=document.getElementById("lightbox-img"),v=document.getElementById("caption"),w=document.querySelector(".close");let y="all",l=[],i=0;function g(e="all"){m.innerHTML="",m.className="gallery masonry",l=e==="all"?f:f.filter(r=>r.theme===e),l.sort((r,t)=>new Date(t.date)-new Date(r.date));let o=3;window.innerWidth<=600?o=1:window.innerWidth<=1100&&(o=2);const s=[];for(let r=0;r<o;r++){const t=document.createElement("div");t.className="gallery-column",s.push(t),m.appendChild(t)}l.forEach((r,t)=>{const n=document.createElement("div");n.className="gallery-item",n.innerHTML=`
            <img src="${r.path}" alt="${r.filename}" loading="lazy">
            <div class="info">
                <div class="title">${r.title}</div>
                <div class="date">${r.date}</div>
            </div>
        `,n.onclick=()=>b(t),s[t%o].appendChild(n)})}let h;window.addEventListener("resize",()=>{clearTimeout(h),h=setTimeout(()=>{g(y)},100)});function b(e){i=e;const o=l[i];c.style.display="flex",a.src=o.path,v.innerHTML=`<strong>${o.filename}</strong><br><small>${o.theme}</small>`,document.body.style.overflow="hidden"}function d(e){i+=e,i<0&&(i=l.length-1),i>=l.length&&(i=0);const o=l[i];a.style.opacity=0,setTimeout(()=>{a.src=o.path,v.innerHTML=`<strong>${o.filename}</strong><br><small>${o.theme}</small>`,a.style.opacity=1},200)}document.querySelector(".prev").onclick=e=>{e.stopPropagation(),d(-1)};document.querySelector(".next").onclick=e=>{e.stopPropagation(),d(1)};document.addEventListener("keydown",e=>{c.style.display==="flex"&&(e.key==="ArrowLeft"&&d(-1),e.key==="ArrowRight"&&d(1),e.key==="Escape"&&w.onclick())});w.onclick=()=>{c.style.display="none",document.body.style.overflow="auto"};c.onclick=e=>{e.target===c&&(c.style.display="none",document.body.style.overflow="auto")};p.forEach(e=>{e.onclick=o=>{o.preventDefault(),p.forEach(s=>s.classList.remove("active")),e.classList.add("active"),y=e.getAttribute("data-theme"),g(y),window.scrollTo({top:0,behavior:"smooth"})}});L();
