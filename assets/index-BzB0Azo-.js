(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function l(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(e){if(e.ep)return;e.ep=!0;const n=l(e);fetch(e.href,n)}})();let f=[];async function L(){try{f=await(await fetch("./paintings.json")).json(),g()}catch(t){console.error("Error loading paintings:",t)}}const m=document.getElementById("gallery"),p=document.querySelectorAll("nav a"),a=document.getElementById("lightbox"),d=document.getElementById("lightbox-img"),v=document.getElementById("caption"),w=document.querySelector(".close");let y="all",c=[],s=0;function g(t="all"){m.innerHTML="",m.className="gallery",c=t==="all"?f:f.filter(e=>e.theme===t),c.sort((e,n)=>new Date(n.date)-new Date(e.date));let o=3;const l=window.innerWidth;l<=768?o=1:l<=1200&&(o=2);const r=[];for(let e=0;e<o;e++){const n=document.createElement("div");n.className="gallery-column",r.push(n),m.appendChild(n)}c.forEach((e,n)=>{const i=document.createElement("div");i.className="gallery-item",i.innerHTML=`
            <img src="${e.path}" alt="${e.filename}" loading="lazy">
            <div class="info">
                <div class="title">${e.title}</div>
            </div>
        `,i.onclick=()=>b(n),r[n%o].appendChild(i)})}let h;window.addEventListener("resize",()=>{clearTimeout(h),h=setTimeout(()=>{g(y)},100)});function b(t){s=t;const o=c[s];a.style.display="flex",d.src=o.path;const l=new Date(o.date),r=isNaN(l)?"":l.getFullYear();v.innerHTML=`<strong>${o.title}</strong><small>${o.theme} ${r?"• "+r:""}</small>`,document.body.style.overflow="hidden"}function u(t){s+=t,s<0&&(s=c.length-1),s>=c.length&&(s=0);const o=c[s];d.style.opacity=0,setTimeout(()=>{d.src=o.path;const l=new Date(o.date),r=isNaN(l)?"":l.getFullYear();v.innerHTML=`<strong>${o.title}</strong><small>${o.theme} ${r?"• "+r:""}</small>`,d.style.opacity=1},200)}document.querySelector(".prev").onclick=t=>{t.stopPropagation(),u(-1)};document.querySelector(".next").onclick=t=>{t.stopPropagation(),u(1)};document.addEventListener("keydown",t=>{a.style.display==="flex"&&(t.key==="ArrowLeft"&&u(-1),t.key==="ArrowRight"&&u(1),t.key==="Escape"&&w.onclick())});w.onclick=()=>{a.style.display="none",document.body.style.overflow="auto"};a.onclick=t=>{t.target===a&&(a.style.display="none",document.body.style.overflow="auto")};p.forEach(t=>{t.onclick=o=>{o.preventDefault(),p.forEach(l=>l.classList.remove("active")),t.classList.add("active"),y=t.getAttribute("data-theme"),g(y),window.scrollTo({top:0,behavior:"smooth"})}});L();
